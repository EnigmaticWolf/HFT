#High-Frequency Foreign Exchange Currency Trading (Forex HFT)

###Spring 2016

####Members: Graham Gobieski, Kevin Kwan, Ziyi Zhu, Shang Liu
#####UNIs: gsg2120, kjk2150, zz2374, sl3881

===

##Table of Index
1. Abstract
2. Introduction
3. Design
  - 3.1 Overview
  - 3.2 Project Setup
	- 3.3 Hardware Architecture
	    3.3.1 Bellman-Ford Algorithm
	    3.3.2 Memory Access
	    3.3.3 VGA
	- 3.4 Software
	    3.4.1 Streaming to FPGA
	    3.4.2 Data Format
4. Conclusions
5. References
Appendix: Code


####3.3.3 VGA
To show the negative cycles (paths for exchanging currencies to make profits) clearly, we used the VGA module to generate numbers, indicating each currency within the cycle, in series on the screen. As shown in ****Fig. 1000**, when we press “enter” on the cycle we are choosing, each number will be translated into abbreviated characters to show the chain in a more readable way. Since we are calculating the currencies represented by indices in the Bellman Ford and Cycle detect calculation module, the results are those indices. It is easier for us to show those indices first on the screen and then convert into characters. For each index we have, we need to read it from the memory and translated into 2-digits number to show. Between each of these currencies, we also need an arrow to tell us the direction of the negative cycle, in other words, the way of exchanging currencies.
These numbers and characters are shown by 16x16 pixels on the screen and stored in one big Rom memory. Thus, we need 256 bits to store each of them with their own addresses in the memory and read them according to the numbers and characters needed to show on the screen. All of these numbers and characters are sprites, and we have total 38 sprites including: 26 capital characters, 10 digit numbers, 1 arrow and 1 totally black. Each sprite is first generated by mif file manually and then join them together into a big mif file. After the big mif file is generated, it can be used to create the memory we need via MegaWizard Plug-in Manager in Quartus II. The relevant code of reading memory is shown **as following*****:

######3.3.3.2 Keyboard

As mentioned before, when we press “enter” on the keyboard connected to the FPGA as peripheral, the cycle can be shown in a more readable way. This is supported by Usblib module, making communication between the peripheral (keyboard) and the FPGA. Four keys are defined “esc”, “enter”, “upshift” and “downshift”. When the software built in the arm processor receives those four keys, it will transmit corresponding data to the FPGA via Avalon Bus as what we did in lab3 and to indicate the operation shown on the screen. When in the cycle we find out, “enter” gives us the name of each currencies and shown in the middle of the screen. When we are in the “enter” state, only “esc” can be responded and exit to the state before the “enter” state, and we can choose the cycle via pressing “upshift” and “downshift” keys.
